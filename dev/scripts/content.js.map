{"version":3,"sources":["content.js"],"names":["chrome","runtime","onMessage","addListener","gotMessage","settings","trackHover","trackClick","trackButtons","coverIcon","newTab","storage","sync","get","result","fartAttackSettings","console","log","initiateOperationFart","message","sender","sendResponse","sounds","links","buttons","players","lastPlayed","trackElements","elementName","elementTag","Array","prototype","slice","call","document","querySelectorAll","forEach","element","addEventListener","playRandomSound","stopSound","setAttribute","generateAudioPlayer","src","audioPlayer","createElement","mp3Source","oggSource","mp3Location","extension","getURL","oggLocation","style","display","error","appendChild","body","controls","load","playSound","player","currentTime","play","pause","randomNum","min","max","Math","floor","random","addPlayers","sound","num","length"],"mappings":";;AAAAA,MAAM,CAACC,OAAP,CAAeC,SAAf,CAAyBC,WAAzB,CAAqCC,UAArC,E,CAEA;;AACA,IAAIC,QAAQ,GAAG;AACXC,EAAAA,UAAU,EAAE,KADD;AAEXC,EAAAA,UAAU,EAAE,IAFD;AAGXC,EAAAA,YAAY,EAAE,IAHH;AAIXC,EAAAA,SAAS,EAAE,KAJA;AAKXC,EAAAA,MAAM,EAAE,IALG,CASf;;AATe,CAAf;AAUAV,MAAM,CAACW,OAAP,CAAeC,IAAf,CAAoBC,GAApB,CAAwB,CAAC,oBAAD,CAAxB,EAAgD,UAASC,MAAT,EAAiB;AAC7D,MAAIA,MAAM,CAACC,kBAAX,EAA+B;AAC3BV,IAAAA,QAAQ,GAAGS,MAAM,CAACC,kBAAlB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,sDAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ;AACAa,IAAAA,qBAAqB;AACxB;AACJ,CAPD;;AASA,SAASd,UAAT,CAAoBe,OAApB,EAA6BC,MAA7B,EAAqCC,YAArC,EAAmD;AAC/ChB,EAAAA,QAAQ,GAAGc,OAAX;AACH,C,CAKD;;;AACA,IACIG,MAAM,GAAG,CACL,QADK,EAEL,QAFK,EAGL,QAHK,EAIL,QAJK,EAKL,QALK,EAML,QANK,EAOL,QAPK,EAQL,QARK,EASL,QATK,EAUL,QAVK,EAWL,QAXK,EAYL,QAZK,CADb;AAAA,IAeIC,KAfJ;AAAA,IAgBIC,OAhBJ;AAAA,IAiBIC,OAjBJ;AAAA,IAkBIC,UAlBJ;;AAsBA,SAASC,aAAT,CAAuBC,WAAvB,EAAoCC,UAApC,EAAgD;AAC5CD,EAAAA,WAAW,GAAGE,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,QAAQ,CAACC,gBAAT,CAA0BN,UAA1B,CAA3B,CAAd;AACAD,EAAAA,WAAW,CAACQ,OAAZ,CAAoB,UAAAC,OAAO,EAAI;AAC3B,QAAIhC,QAAQ,CAACE,UAAb,EAAyB;AACrB8B,MAAAA,OAAO,CAACC,gBAAR,CAAyB,OAAzB,EAAkC,YAAM;AACpCC,QAAAA,eAAe;AAClB,OAFD;AAGH;;AACD,QAAIlC,QAAQ,CAACC,UAAb,EAAyB;AACrB+B,MAAAA,OAAO,CAACC,gBAAR,CAAyB,YAAzB,EAAuC,YAAM;AACzCC,QAAAA,eAAe;AAClB,OAFD;AAGAF,MAAAA,OAAO,CAACC,gBAAR,CAAyB,YAAzB,EAAuC,YAAM;AACzCE,QAAAA,SAAS,CAACd,UAAD,CAAT;AACH,OAFD;AAGAW,MAAAA,OAAO,CAACC,gBAAR,CAAyB,WAAzB,EAAsC,YAAM;AACxCE,QAAAA,SAAS,CAACd,UAAD,CAAT;AACH,OAFD;AAGH,KAhB0B,CAkB3B;;;AACA,QAAIrB,QAAQ,CAACK,MAAb,EAAqB;AACjB2B,MAAAA,OAAO,CAACI,YAAR,CAAqB,QAArB,EAA+B,QAA/B;AACH;AAEJ,GAvBD;AAwBH;;AAID,SAASC,mBAAT,CAA6BC,GAA7B,EAAkC;AAC9B,MACIC,WAAW,GAAGV,QAAQ,CAACW,aAAT,CAAuB,OAAvB,CADlB;AAAA,MAEIC,SAAS,GAAGZ,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAFhB;AAAA,MAGIE,SAAS,GAAGb,QAAQ,CAACW,aAAT,CAAuB,QAAvB,CAHhB;AAAA,MAIIG,WAAW,GAAGhD,MAAM,CAACiD,SAAP,CAAiBC,MAAjB,CAAwB,gBAAgBP,GAAhB,GAAsB,MAA9C,CAJlB;AAAA,MAKIQ,WAAW,GAAGnD,MAAM,CAACiD,SAAP,CAAiBC,MAAjB,CAAwB,gBAAgBP,GAAhB,GAAsB,MAA9C,CALlB,CAD8B,CAS9B;;AACAC,EAAAA,WAAW,CAACH,YAAZ,CAAyB,SAAzB,EAAoC,IAApC;AACAG,EAAAA,WAAW,CAACQ,KAAZ,CAAkBC,OAAlB,GAA4B,MAA5B;AACAP,EAAAA,SAAS,CAACL,YAAV,CAAuB,MAAvB,EAA+B,YAA/B;AACAM,EAAAA,SAAS,CAACN,YAAV,CAAuB,MAAvB,EAA8B,WAA9B;AACAK,EAAAA,SAAS,CAACL,YAAV,CAAuB,KAAvB,EAA8BO,WAA9B;AACAD,EAAAA,SAAS,CAACN,YAAV,CAAuB,KAAvB,EAA8BU,WAA9B,EAf8B,CAkB9B;;AACAL,EAAAA,SAAS,CAACR,gBAAV,CAA2B,OAA3B,EAAoC,YAAU;AAC1CtB,IAAAA,OAAO,CAACsC,KAAR,CAAc,4BAA4BR,SAAS,CAACH,GAAtC,GAA4C,YAA1D;AACH,GAFD;AAGAI,EAAAA,SAAS,CAACT,gBAAV,CAA2B,OAA3B,EAAoC,YAAU;AAC1CtB,IAAAA,OAAO,CAACsC,KAAR,CAAc,4BAA4BP,SAAS,CAACJ,GAAtC,GAA4C,YAA1D;AACH,GAFD,EAtB8B,CA0B9B;;AACAC,EAAAA,WAAW,CAACW,WAAZ,CAAwBT,SAAxB;AACAF,EAAAA,WAAW,CAACW,WAAZ,CAAwBR,SAAxB,EA5B8B,CA8B9B;;AACAb,EAAAA,QAAQ,CAACsB,IAAT,CAAcD,WAAd,CAA0BX,WAA1B;AAEAA,EAAAA,WAAW,CAACa,QAAZ,GAAuB,KAAvB,CAjC8B,CAiCA;;AAE9Bb,EAAAA,WAAW,CAACc,IAAZ,GAnC8B,CAmCV;AACvB;;AAED,SAASC,SAAT,CAAmBC,MAAnB,EAA2B;AACvB,MAAIA,MAAJ,EAAY;AACR;AACA,QAAIA,MAAM,CAACC,WAAP,KAAuB,CAA3B,EAA8B;AAC1BD,MAAAA,MAAM,CAACC,WAAP,GAAqB,CAArB;AACH;;AACDD,IAAAA,MAAM,CAACE,IAAP;AACH;AACJ;;AAED,SAAStB,SAAT,CAAmBoB,MAAnB,EAA2B;AACtB;AACD,MAAIA,MAAM,IAAIA,MAAM,CAACC,WAAP,KAAuB,CAArC,EAAwC;AACpCD,IAAAA,MAAM,CAACG,KAAP;AACAH,IAAAA,MAAM,CAACC,WAAP,GAAqB,CAArB,CAFoC,CAEZ;AAC3B;AACJ;;AAGD,SAASG,SAAT,CAAmBC,GAAnB,EAAwBC,GAAxB,EAA6B;AACzB,SAAOC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACE,MAAL,MAAkBH,GAAG,GAAGD,GAAN,GAAY,CAA9B,CAAZ,IAAiDA,GAAxD;AACH;;AAED,SAASK,UAAT,GAAsB;AAClBhD,EAAAA,MAAM,CAACc,OAAP,CAAe,UAAAmC,KAAK,EAAI;AACpB7B,IAAAA,mBAAmB,CAAC6B,KAAD,CAAnB;AACH,GAFD;AAGA9C,EAAAA,OAAO,GAAGK,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,CAA3B,CAAV;AACH;;AAGD,SAASI,eAAT,GAA2B;AACvB,MAAIiC,GAAG,GAAGR,SAAS,CAAC,CAAD,EAAIvC,OAAO,CAACgD,MAAR,GAAiB,CAArB,CAAnB;AACA,MAAIb,MAAM,GAAGnC,OAAO,CAAC+C,GAAD,CAApB;AACAb,EAAAA,SAAS,CAACC,MAAD,CAAT;AACAlC,EAAAA,UAAU,GAAGkC,MAAb,CAJuB,CAIF;AACxB;;AAGD,SAAS1C,qBAAT,GAAiC;AAC7BoD,EAAAA,UAAU;AACV3C,EAAAA,aAAa,CAAC,OAAD,EAAU,GAAV,CAAb;;AACA,MAAItB,QAAQ,CAACG,YAAb,EAA2B;AACvBmB,IAAAA,aAAa,CAAC,SAAD,EAAY,QAAZ,CAAb;AACH;AAEJ","sourcesContent":["chrome.runtime.onMessage.addListener(gotMessage);\n\n// Default settings\nlet settings = {\n    trackHover: false,\n    trackClick: true,\n    trackButtons: true,\n    coverIcon: false,\n    newTab: true\n}\n\n\n// Load settings from Chrome Storage\nchrome.storage.sync.get(['fartAttackSettings'], function(result) {\n    if (result.fartAttackSettings) {\n        settings = result.fartAttackSettings;\n        console.log('🍑💨 Fart Attack settings loaded from Chrome storage');\n        console.log(settings);\n        initiateOperationFart();\n    }\n});\n\nfunction gotMessage(message, sender, sendResponse) {\n    settings = message;\n}\n\n\n\n\n// Operation Fart\nlet\n    sounds = [\n        '204844',\n        '204849',\n        '204918',\n        '204959',\n        '205008',\n        '205021',\n        '205026',\n        '205033',\n        '205044',\n        '205053',\n        '205102',\n        '205106'\n    ],\n    links,\n    buttons,\n    players,\n    lastPlayed\n;\n\n\nfunction trackElements(elementName, elementTag) {\n    elementName = Array.prototype.slice.call(document.querySelectorAll(elementTag));\n    elementName.forEach(element => {\n        if (settings.trackClick) {\n            element.addEventListener('click', () => {\n                playRandomSound();\n            });\n        }\n        if (settings.trackHover) {\n            element.addEventListener('mouseenter', () => {\n                playRandomSound();\n            });\n            element.addEventListener('mouseleave', () => {\n                stopSound(lastPlayed);\n            });\n            element.addEventListener('touchmove', () => {\n                stopSound(lastPlayed);\n            });\n        }\n        \n        // Make sure links open in a new window\n        if (settings.newTab) {\n            element.setAttribute('target', '_blank');\n        }\n        \n    });\n}\n\n\n\nfunction generateAudioPlayer(src) {\n    let\n        audioPlayer = document.createElement('audio'),\n        mp3Source = document.createElement('source'),\n        oggSource = document.createElement('source'),\n        mp3Location = chrome.extension.getURL('sounds/mp3/' + src + '.mp3'),\n        oggLocation = chrome.extension.getURL('sounds/ogg/' + src + '.ogg')\n    ;\n\n    // Set attributes\n    audioPlayer.setAttribute('preload', true);\n    audioPlayer.style.display = 'none';\n    mp3Source.setAttribute('type', 'audio/mpeg');\n    oggSource.setAttribute('type','audio/ogg');\n    mp3Source.setAttribute('src', mp3Location);\n    oggSource.setAttribute('src', oggLocation);\n\n    \n    // Catch errors\n    mp3Source.addEventListener('error', function(){\n        console.error('😶 D\\'oh! The mp3 file ' + mp3Source.src + ' is wrong!');\n    });\n    oggSource.addEventListener('error', function(){\n        console.error('😶 D\\'oh! The ogg file ' + oggSource.src + ' is wrong!');\n    });\n\n    // appending the sources to the player element\n    audioPlayer.appendChild(mp3Source);\n    audioPlayer.appendChild(oggSource);\n    \n    // Append player to page\n    document.body.appendChild(audioPlayer);\n\n    audioPlayer.controls = false; // Hide player\n    \n    audioPlayer.load(); // Load audio when it's updated   \n}\n\nfunction playSound(player) {\n    if (player) {\n        // check if play head is not at 0 and reset it\n        if (player.currentTime !== 0) {\n            player.currentTime = 0;\n        }\n        player.play();\n    }\n}\n\nfunction stopSound(player) {\n     // check if player exists, the check if the sound already played before stopping it\n    if (player && player.currentTime !== 0) {\n        player.pause();\n        player.currentTime = 0; // reset to beginning\n    }\n}\n\n\nfunction randomNum(min, max) {\n    return Math.floor( Math.random()  * (max - min + 1) ) + min;\n}\n\nfunction addPlayers() {\n    sounds.forEach(sound => {\n        generateAudioPlayer(sound);\n    });\n    players = Array.prototype.slice.call(document.querySelectorAll('audio'));\n}\n\n\nfunction playRandomSound() {\n    let num = randomNum(0, players.length - 1);\n    let player = players[num];\n    playSound(player);\n    lastPlayed = player; // Register last played player\n}\n\n\nfunction initiateOperationFart() {\n    addPlayers();\n    trackElements('links', 'a');\n    if (settings.trackButtons) {\n        trackElements('buttons', 'button');\n    }\n    \n}\n\n"],"file":"content.js"}